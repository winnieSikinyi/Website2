"use strict";(globalThis.webpackChunkunsplash_web=globalThis.webpackChunkunsplash_web||[]).push([[4018],{13374:(e,a,t)=>{t.d(a,{Yo:()=>K,WZ:()=>ee,DU:()=>B});var n=t(85893),r=t(3735),d=t(11324),c=t(70902),o=t(66132),s=t(83143),i=t(18711),p=t(98677),l=t(8481),h=t(46681),m=t(4094),T=t(43882),k=t(69184),u=t(85198),y=t(57842),I=t(62876),S=t(87976),U=t(40755),v=t(49056),G=t(70455),b=t(74235),z=t(86287),x=t(41210),F=t(22965),P=t(61082),_=t(56225);const f=(0,r.zG)(_.er(),y.NG((e=>e.ad_env)),y.HV((()=>(0,P.xL)((0,P.Uh)())?"production":"development"))),w=(()=>{switch(f){case"production":return"10457";case"development":return"10495"}})(),A=(()=>{switch(f){case"production":return"1121954";case"development":return"1124528"}})();var D=t(57051),C=t(60301),g=t(8173),H=t(72842),j=t(13761),E=t(46247),N=t(97817),M=t(16017),O=t(68873),W=t(76701),Y=t(61465),$=t(90599);const L=G.Dy.match({HomePageHeader:()=>"homepageHeader",SayThanksCardMobile:()=>"say-thanks-card-mobile",SayThanksCardTabletUp:()=>"say-thanks-card-desktop",TopicsInFeed:()=>"topics-in-feed",ExploreInFeed:()=>"explore-in-feed",SearchInFeed:()=>"search-in-feed"}),Q=(()=>{switch(f){case"development":return G.Dy.match({HomePageHeader:()=>()=>237078,SayThanksCardMobile:()=>()=>237077,SayThanksCardTabletUp:()=>()=>237076,TopicsInFeed:()=>Y.AS.match({Phone:(0,r.a9)(257457),[S._]:(0,r.a9)(237186)}),ExploreInFeed:()=>Y.AS.match({Phone:(0,r.a9)(257456),[S._]:(0,r.a9)(247889)}),SearchInFeed:()=>Y.AS.match({Phone:(0,r.a9)(257455),[S._]:(0,r.a9)(241347)})});case"production":return G.Dy.match({HomePageHeader:()=>()=>219422,SayThanksCardMobile:()=>()=>219423,SayThanksCardTabletUp:()=>()=>219424,TopicsInFeed:()=>Y.AS.match({Phone:(0,r.a9)(257453),[S._]:(0,r.a9)(237209)}),ExploreInFeed:()=>Y.AS.match({Phone:(0,r.a9)(257454),[S._]:(0,r.a9)(247890)}),SearchInFeed:()=>Y.AS.match({Phone:(0,r.a9)(257452),[S._]:(0,r.a9)(241348)})})}})(),V=(0,r.ls)((e=>{let{adType:a,count:t}=e;return(0,r.zG)(Q(a),O.UI((e=>({divName:L(a),zoneIds:E.of(e),count:t,networkId:w,siteId:A,adTypes:E.of(5),properties:(0,r.zG)(a,G.Dy.match({SearchInFeed:e=>{let{keyword:a}=e;return{keyword:a}},[S._]:()=>({})}))}))))}),O.UI((e=>({...(0,r.zG)((0,F.T)(),y.WA((e=>({user:{key:(0,x.Vv)(e)}})))),placements:[e]})))),Z=(0,r.ls)(V,O.UI((e=>k.x0($.HM)("/nabc",{method:"POST",headers:{[C.JU]:D.z.JSON},body:j.SO(e)})))),q=G.Dy.match({HomePageHeader:()=>["kitchen-sink"],SayThanksCardMobile:()=>["kitchen-sink"],SayThanksCardTabletUp:()=>["kitchen-sink"],TopicsInFeed:()=>["kitchen-sink","in-feed-video"],ExploreInFeed:()=>["kitchen-sink","in-feed-video"],SearchInFeed:()=>["kitchen-sink","in-feed-video"]}),J=(0,r.ls)((e=>a=>m.t94(W.Eq)(a.data.ctTemplateType)(e)),M.ff),R=e=>{let{adType:a,count:t}=e;return(0,r.zG)(Z({adType:a,count:t}),O.UI((0,r.ls)(N.QN,N.Zl((e=>{const t=L(a),n=q(a);return(0,r.zG)(e.decisions,g.P5(t),y.tS(y.ij),H.Yo,H.At((e=>()=>{e.forEach((e=>{const a=(0,r.zG)(e.contents,E.YM);var d;J(n)(a)&&(d={validTemplateNames:n,currentTemplateName:a.data.ctTemplateType,placement:t},(0,s.wj)({error:new Error(`Wrong kevel template "${d.currentTemplateName}" used for placement "${d.placement}". Accepting only "${(0,r.zG)(d.validTemplateNames,m.v_p(", "))}".`)}))}))})),H.UI(E.UI((e=>{const a=(0,r.zG)(e.contents,E.YM);return G.pI({ad:a,decision:e})}))),N.tD)})))))},B=e=>{let{adType:a,count:t}=e;const n=(0,p.I)(),c=(0,h.v)(v._v);return(0,d.m)((e=>{const a=(0,r.zG)(e,U.UI((e=>e[0])),U.xb(G.nG.equals)),d=(0,r.zG)(e,U.UI((e=>e[1])),U.xb(y.fS));return(0,r.zG)(u.gz((0,r.zG)(a,u.u5),d),u.pd((e=>{let[a,d]=e;return(0,r.zG)(U.PQ((()=>R({adType:a,count:t})(d))),U.bw((e=>{if(I.hx(e)){const{error:a}=e;(0,r.zG)(a,k.L.match({DecodeError:(0,r.ls)(s.W7,T.ht),[S._]:r.Q1}))}else I.d6(e)&&(0,r.zG)(e.value,y.g_((()=>[o.aU.mk.TrackDirectAdFetched({metadataOption:y.YP,adType:a})]),m.UID((e=>o.aU.mk.TrackDirectAdFetched({metadataOption:y.G(e.metadata),adType:a})))),(0,i.wV)(n))})))})),U.UI(y.pF((()=>I.nn))))}),[a,c])},K=e=>{let{adType:a,count:t,children:n}=e;return n((0,l.s)(B({adType:a,count:t})))},X=e=>{let{metadata:a,adType:t}=e;const d=(0,p.I)();return(0,c.Z)((()=>{d(o.aU.mk.TrackDirectAdLinkImpression({metadata:a,adType:t}))})),(0,n.jsxs)(b.PRT,{children:[(0,n.jsx)(z._,{url:a.impressionUrl}),(0,r.zG)(y.ij(a.impressionTrackers),y.UI((e=>e.map((e=>(0,n.jsx)(z._,{url:e},e))))),y.WG)]})},ee=e=>{let{children:a,metadata:t,adType:r}=e;return(0,n.jsxs)(b.PRT,{children:[a,(0,n.jsx)(X,{metadata:t,adType:r})]})}},18912:(e,a,t)=>{t.d(a,{$:()=>s});var n=t(85893),r=t(66132),d=t(98677),c=t(74235),o=t(4387);const s=e=>{let{metadata:a,adType:t,...s}=e;const i=(0,d.I)(),p=c.I47((()=>{i(r.aU.mk.TrackDirectAdClick({metadata:a,adType:t}))}),[a,t,i]);return(0,n.jsx)(o.r,{onClick:p,href:a.clickUrl,...s})}},8481:(e,a,t)=>{t.d(a,{s:()=>d});var n=t(8144),r=t(62876);const d=e=>(0,n.p)(e,r.nn)}}]);
//# sourceMappingURL=4018.82c23dd7242d13533907.js.map